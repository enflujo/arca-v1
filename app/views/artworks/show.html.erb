<%- model_class = Artwork -%>


<div class="page-header row">
  <div class="col-md-3"></div>
  <div class="col-md-9">
    <h2 class="uppercase"><%= @artwork.title %>
      <small><%= @artwork.category_1.name if @artwork.category_1%></small>
    </h2>
  </div>
</div>

<div class="row">

  <div class="col-md-2">
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

      <div class="panel panel-default" style="margin-top: 0px">
        <div class="panel-heading" role="tab" id="headingTemas">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTemas" aria-expanded="true" aria-controls="collapseTemas">
              <%= link_to  '&#8226 Temas'.html_safe, artworks_path+"?topic=true" %>
            </a>
          </h4>
        </div>
      </div>

      <div class="panel panel-default" style="margin-top: 0px">
        <div class="panel-heading" role="tab" id="headingOne">
          <h4 class="panel-title">
            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
              <%= link_to  '&#8226 Autores'.html_safe, artworks_path+"?authors=true" %>
            </a>
          </h4>
        </div>
      </div>

      <div class="panel panel-default" style="margin-top: 0px">
        <div class="panel-heading" role="tab" id="headingThree">
          <h4 class="panel-title">
            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              <%= link_to '&#8226 Regiones'.html_safe, artworks_path+"?region=true" %>
            </a>
          </h4>
        </div>
      </div>

      <div class="panel panel-default" style="margin-top: 0px">
        <div class="panel-heading" role="tab" id="headingTwo">
          <h4 class="panel-title">
            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              <%= link_to  '&#8226 Obras'.html_safe, artworks_path%>
            </a>
          </h4>
        </div>
      </div>

    </div>
  </div>

  <div class="col-md-4">
    <a type="href" data-toggle="modal" data-target="#imageModal" href="">
      <%= image_tag(@artwork.avatar.url(:large), :class => "img-thumbnail img-responsive", :style => "margin-left: auto; margin-right: auto;") %>
    </a>
    <div class="img_title">
      <h3 style="color: #000000;   text-align: right;">Id:<%= @artwork.id %></h3>
      <div style="font-style: normal">
        <%= @artwork.get_title  %><br>
        <%= @artwork.get_author_name  %><br>
        Fecha: <%= @artwork.get_annotation_date%>
      </div>
      </div>
      <%= link_to 'Download', @artwork.avatar.url %>
    <br>
    <br>
    <div class="row">
      <div class="col-md-12">
        <div class="tab-pane fade in" id="location">
          <div class="row">
            <div class="col-md-6">
              <div class="row">
                <div class="col-sm-12">
                  <label style="text-align: left">Lugar de origen</label>
                </div>
              </div>
              <div class="row">
                <label class="control-label col-sm-3" style="font-size: 10px">Latitud</label>
                <div class="col-sm-9"><%=@artwork.latitude_origin%></div>
              </div>
              <div class="row">
                <label class="control-label col-sm-3" style="font-size: 10px">Longitud</label>
                <div class="col-sm-9"><%=@artwork.longitude_origin%></div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="row">
                <div class="col-sm-12">
                  <label style="text-align: right">Lugar actual</label>
                </div>
              </div>
              <div class="row">
                <label class="control-label col-sm-3" style="font-size: 10px">Latitud</label>
                <div class="col-sm-9"><%=@artwork.latitude_current%></div>
              </div>
              <div class="row">
                <label class="control-label col-sm-3" style="font-size: 10px">Longitud</label>
                <div class="col-sm-9"><%=@artwork.longitude_current%></div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>

  <div class="col-md-6">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#datos_generales" data-toggle="tab" aria-expanded="false">Datos</a></li>
      <li class=""><a href="#desc_img_rel" data-toggle="tab" aria-expanded="false">Descripción</a></li>
      <li class=""><a href="#personajes" data-toggle="tab" aria-expanded="false">Personajes y Gestos</a></li>
    </ul>
    <br>
    <div id="myTabContent" class="tab-content">
      <div class="tab-pane fade active in" id="datos_generales" style="padding-left: 15px">
        <div class="container" style="width: inherit">
          <div class="row">
            <label class="control-label col-sm-3">Titulo</label>
            <div class="col-sm-9"><%= @artwork.get_title%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Autor</label>
            <div class="col-sm-9"><%=@artwork.get_author_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Actividad</label>
            <div class="col-sm-9"><%=@artwork.get_author_activity%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Información Biográfica</label>
            <div class="col-sm-9"><%=@artwork.get_author_biography%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Firmado</label>
            <div class="col-sm-9"><%=@artwork.get_signed%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Tipo</label>
            <div class="col-sm-9"><%=@artwork.get_type_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Fuente de la imágen</label>
            <div class="col-sm-9"><%=@artwork.get_source_name%></div>
          </div>
          <br>
          <div class="row">
            <label class="control-label col-sm-3">Ubicación</label>
            <div class="col-sm-9"><%=@artwork.get_place%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">País de origen</label>
            <div class="col-sm-9"><%=@artwork.get_origin_country_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Ciudad de origen</label>
            <div class="col-sm-9"><%=@artwork.get_origin_city_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">País actual</label>
            <div class="col-sm-9"><%=@artwork.get_actual_country_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Ciudad actual</label>
            <div class="col-sm-9"><%=@artwork.get_actual_city_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Escuela</label>
            <div class="col-sm-9"><%=@artwork.get_school_name%></div>
          </div>
          <br>
          <div class="row">
            <label class="control-label col-sm-3">Clasificación</label>
            <div class="col-sm-10">
              <table class="table table-condensed table-hover table-striped">
                <tbody>
                <tr><td>
                  <label class="control-label col-sm-3">Categoría 1</label>
                  <div class="col-sm-9"><%=@artwork.get_category_1_name%></div>
                </td></tr>
                <tr><td>
                  <label class="control-label col-sm-3">Categoría 2</label>
                  <div class="col-sm-9"><%=@artwork.get_category_2_name%></div>
                  </td></tr>
                <tr><td>
                  <label class="control-label col-sm-3">Categoría 3</label>
                  <div class="col-sm-9"><%=@artwork.get_category_3_name%></div>
                  </td></tr>
                <tr><td>
                  <label class="control-label col-sm-3">Categoría 4</label>
                  <div class="col-sm-9"><%=@artwork.get_category_4_name%></div>
                  </td></tr>
                <tr><td>
                  <label class="control-label col-sm-3">Categoría 5</label>
                  <div class="col-sm-9"><%=@artwork.get_category_5_name%></div>
                  </td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <br>
          <div class="row">
            <label class="control-label col-sm-3">Sintesis</label>
            <div class="col-sm-9"><%=@artwork.get_synthesis%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Anotación</label>
            <div class="col-sm-9"><%=@artwork.get_annotation%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Comentario Bibliográfico</label>
            <div class="col-sm-9"><%=@artwork.get_biographic_comment%></div>
          </div>
          <br>
          <div class="row">
            <label class="control-label col-sm-3">Descriptores</label>
            <div class="col-sm-10">
              <table class="table table-condensed table-hover table-striped">
                <tbody>
                <% @artwork.descriptions.each  do |sym| %>
                    <tr><td><%= sym.description %></td></tr>
                <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>

      </div>
      <div class="tab-pane fade in" id="desc_img_rel">
        <div class="container" style="width: inherit">
          <div class="row">
            <label class="control-label col-sm-3">Escenario</label>
            <div class="col-sm-9"><%=@artwork.get_scene_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Tipo de relato</label>
            <div class="col-sm-9"><%=@artwork.get_story_type_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Donante</label>
            <div class="col-sm-9"><%=@artwork.get_donor_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Cartelera Filacteria</label>
            <div class="col-sm-9"><%=@artwork.get_phylactery_billboard_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Fuente iconográfica</label>
            <div class="col-sm-9"><%=@artwork.get_iconographic_attribute_name%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Iconotexto</label>
            <div class="col-sm-9"><%=@artwork.get_comment%></div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Símbolos</label>
            <div class="col-sm-10">
              <table class="table table-condensed table-hover table-striped">

                <tbody>

                <% @artwork.artwork_symbols.order('name ASC').each  do |sym| %>
                    <tr><td><%= sym.name %></td></tr>
                <% end %>

                </tbody>
              </table>
            </div>
          </div>
          <div class="row">
            <label class="control-label col-sm-3">Características particulares</label>
            <div class="col-sm-10">
              <table class="table table-condensed table-hover table-striped">
                <tbody>
                <% @artwork.engravings.order('name ASC').each  do |e| %>
                    <tr><td><%= e.name %></td></tr>
                <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-pane fade in" id="personajes">

        <div class="container" style="width: inherit">

              <div class="row" >

              </div>
          <div class="row">
            <label class="control-label col-sm-3">Gestos:</label><br>
            <br>
            <p>La cultura barroca es gestual. El gesto complementaba la comunicación visual con gestos de oralidad, de modo que las pinturas “hablaban”. La siguiente información trata de reconstruir la cultura gestual quirológica y quironómica a partir de los tratados y de las frecuencias gestuales en la pintura colonial.</p>
            <div class="col-sm-10">
              <table class="table table-condensed table-hover table-striped">
                <tbody>
                <% @artwork.body_gestures.each  do |sym| %>
                    <tr>
                      <td><%= image_tag sym.image.url(:thumb) %></td>
                      <td><%= sym.name %></td>
                    </tr>
                <% end %>
                </tbody>
              </table>
            </div>
          </div>
          <div class="row">
            <label class="control-label">Pasaje:</label>
            <%= @artwork.get_passage_name %>
          </div>
          <div class="row">
            <textarea class="control-text" style="margin: 0px; width: 100%; height: 74px;">
              <%= @artwork.get_passage_text %>
            </textarea>
          </div>
          <div class="row">
            <div class="col-sm-12">
              <div class="row">
                <div class="col-md-12">
                  <label class="control-label">Tipo de historia:</label>
                  <%= @artwork.get_passage_history_type %>
                </div>
                <div class="col-md-12">
                  <label class="control-label">Fuente:</label>
                  <%= @artwork.get_passage_source %>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <table class="table table-condensed table-bordered table-striped">
              <tbody>
              <% @artwork.get_characters.each  do |sym| %>
                  <tr><td>
                    <div class="col-md-12">
                      <div class="row">
                        <div class="col-md-12">
                          <label class="control-label">Personaje:</label> <%= sym.get_name %>
                        </div>

                        <div class="col-md-12">
                          <div class="row">
                            <div class="col-md-6">
                              <label class="control-label">Muerte:</label>
                              <%= sym.get_death_date %>
                            </div>
                            <div class="col-md-6">
                              <label class="control-label">Beatificación:</label> <%= sym.get_beatification_date %>
                            </div>
                            <div class="col-md-6">
                              <label class="control-label">Canonización:</label> <%= sym.get_canonization_date %>
                            </div>
                            <div class="col-md-6">
                              <label class="control-label">Principal:</label> <%= sym.get_is_principal %>
                            </div>
                          </div>
                        </div>

                        <div class="more-less col-md-12" >
                          <br>
                          <label class="control-label">Biografía:</label>
                          <%= sym.get_biography %>
                        </div>
                      </div>
                    </div>
                  </td></tr>
              <% end %>
              </tbody>
            </table>
          </div>


        </div>
      </div>

    </div>
  </div>
</div>


<br>
<!-- Modal for image view -->
<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <% if @artwork.save %>
          <h4 class="modal-title" id="myModalLabel"><%= "#{@artwork.title} - #{@artwork.author.name} "%></h4>
        <% end %>
      </div>
      <div class="modal-body">
        <%= image_tag @artwork.avatar.url,
          :id => "zoomableImage",
          :class => "img-thumbnail img-responsive",
          'data-zoom-image' => @artwork.avatar.url,
          :style => "margin-left: auto; margin-right: auto;"
        %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<style>
    .zoomContainer{ z-index: 9999;}
    .zoomWindow{ z-index: 9999;}
</style>
<script>
    //Zoomable Image with ElevateZoom
    $("#zoomableImage").elevateZoom({ zoomType  : "inner", cursor: "crosshair" });

    $('#imageModal').on('shown.bs.modal', function() {
        $("#zoomableImage").elevateZoom({
            zoomType  : "lens",
            lensShape : "round",
            lensSize : 200,
            scrollZoom : true,
            containLensZoom : true
        });
    });

    jQuery('#imageModal').on('hidden.bs.modal', function (e) {
        jQuery.removeData(jQuery('#zoomableImage'), 'elevateZoom');//remove zoom instance from image
        jQuery('.zoomContainer').remove();// remove zoom container from DOM
    });

</script>

<% content_for :css_application do %>
    <%= stylesheet_link_tag "artworks_show" %>
<% end %>